{% extends "ui/base.html" %}

{% block content %}
  <div class="between" style="display:flex;justify-content:space-between;gap:10px;align-items:center;flex-wrap:wrap;">
    <div>
      <h1 style="margin:0;font-size:18px;">작업 상세</h1>
      <div class="small" style="margin-top:6px;">작업 처리/결재 전이/첨부 관리</div>
    </div>
    <div style="display:flex;gap:8px;">
      <a class="pill" href="/ui/works?login={{ login }}">목록</a>
    </div>
  </div>

  <div class="hr"></div>
  <div id="readOnlyMsg" class="small" style="display:none;color:#f59e0b;"></div>
  <div id="error" class="small" style="color:#fecaca;"></div>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
    <div>
      <div style="display:flex;gap:8px;align-items:center;">
        <div class="pill" id="workStatus">-</div>
        <div id="workCode" class="small"></div>
      </div>
      <h2 id="workTitle" style="margin:10px 0 0 0;font-size:16px;"></h2>
      <div id="workMeta" class="small" style="margin-top:6px;"></div>

      <div class="hr"></div>
      <label>결과 메모</label>
      <textarea id="resultNote" rows="5" style="width:100%;background:#0b1528;color:#e5e7eb;border:1px solid #25324a;border-radius:12px;padding:10px 12px;"></textarea>
      <div style="margin-top:8px;display:flex;gap:10px;align-items:center;">
        <label><input type="checkbox" id="urgent" /> 긴급</label>
        <button class="pill" id="btnSave">저장</button>
        <button class="pill" id="btnDelete" style="border-color:#dc2626;color:#fecaca;">삭제(취소)</button>
      </div>
      <div class="small" style="margin-top:6px;">완료일: <span id="completedAt">-</span></div>
    </div>

    <div>
      <label>결재/상태 전이</label>
      <div style="margin-top:8px;">
        <input id="transitionNote" placeholder="전이 사유(선택)" />
      </div>
      <div id="transitions" style="margin-top:8px;"></div>

      <div class="hr"></div>
      <label>첨부파일</label>
      <div style="display:flex;gap:8px;margin-top:6px;">
        <input type="file" id="attFile" />
        <button class="pill" id="btnUpload">업로드</button>
      </div>
      <div id="attachments" style="margin-top:8px;"></div>
    </div>
  </div>

  <div class="hr"></div>
  <label>이력</label>
  <div id="events" style="margin-top:8px;"></div>
{% endblock %}

{% block scripts %}
  <script src="/static/work_detail.js"></script>
{% endblock %}
