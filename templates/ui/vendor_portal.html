{% extends "ui/base.html" %}

{% block content %}
  <div>
    <h1 style="margin:0;font-size:18px;">외주업체 포털</h1>
    <div class="small" style="margin-top:6px;">배정된 작업만 조회됩니다.</div>
  </div>

  <div class="hr"></div>

  <div class="row" style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;">
    <div style="flex:1;min-width:220px;">
      <label>검색</label><br/>
      <input id="q" placeholder="작업코드/제목/위치" style="width:100%;" />
    </div>
    <div style="min-width:160px;">
      <label>상태</label><br/>
      <select id="mode" style="width:100%;">
        <option value="open">미완료</option>
        <option value="done">완료</option>
        <option value="all">전체</option>
      </select>
    </div>
    <div style="min-width:120px;">
      <label>&nbsp;</label><br/>
      <button class="pill" id="btnReload">새로고침</button>
    </div>
  </div>

  <div class="hr"></div>

  <div id="vendorCards" style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;"></div>
  <div class="small" id="empty" style="margin-top:14px;display:none;">표시할 작업이 없습니다.</div>

  <div id="detailBox" style="margin-top:14px;display:none;">
    <div class="hr"></div>
    <h3 style="margin:0 0 8px 0;font-size:14px;">작업 상세</h3>
    <div class="small" id="detailTitle"></div>
    <div style="margin-top:8px;" id="detailBody"></div>
    <div style="margin-top:10px;">
      <h4 style="margin:0 0 6px 0;font-size:13px;">첨부파일</h4>
      <div id="attachmentList" class="small"></div>
    </div>
  </div>

  <div id="commentBox" style="margin-top:14px;display:none;">
    <div class="hr"></div>
    <h3 style="margin:0 0 8px 0;font-size:14px;">문의/답변 등록</h3>
    <div class="small" id="commentTitle"></div>
    <div style="margin-top:8px;">
      <textarea id="commentText" rows="4" style="width:100%;background:#0b1528;color:#e5e7eb;border:1px solid #25324a;border-radius:12px;padding:10px 12px;"></textarea>
    </div>
    <button class="pill" id="btnComment" style="margin-top:8px;">전송</button>
    <div class="small" id="commentMsg"></div>
  </div>

{% endblock %}

{% block scripts %}
  <script src="/static/vendor_portal.js"></script>
{% endblock %}
