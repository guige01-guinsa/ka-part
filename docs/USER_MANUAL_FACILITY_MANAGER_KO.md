# 아파트 시설관리 사용자 매뉴얼

대상 시스템: `ka-part`  
대상 버전: `2.9.0` (2026-02-08 기준)

## 1. 목적
이 매뉴얼은 아파트 시설관리 담당자가 다음 업무를 수행할 수 있도록 안내합니다.

1. 일일 점검값 입력/조회/수정/삭제
2. PDF/엑셀 출력
3. 사용자 계정 관리(관리자)
4. 단지별 제원(탭/항목/레이아웃) 관리(관리자)

## 2. 권한 구분
1. 일반 사용자: 일지 입력, 저장, 조회, 출력 가능
2. 관리자: 일반 사용자 기능 + 사용자관리 + 제원설정 가능

## 3. 접속 주소
1. 메인 화면: `https://www.ka-part.com/pwa/`
2. 로그인 화면: `https://www.ka-part.com/pwa/login.html`
3. 사용자관리(관리자): `https://www.ka-part.com/pwa/users.html`
4. 제원설정(관리자): `https://www.ka-part.com/pwa/spec_env.html`

## 4. 메인 화면 사용법
상단에서 `단지명`, `시작`, `종료` 날짜를 선택한 뒤 하단 탭의 항목을 입력합니다.

버튼 기능:
1. `◀ / ▶`: 이전/다음 날짜 이동
2. `기간조회`: 시작~종료 사이 저장된 기록 탐색
3. `저장`: 현재 단지/날짜 데이터 저장
4. `삭제`: 현재 단지/날짜 데이터 삭제
5. `엑셀`: 선택 기간 데이터 엑셀 다운로드
6. `PDF`: 현재 날짜 데이터 PDF 다운로드
7. `사용자관리`: 사용자 등록/수정/삭제 화면 이동(관리자만)
8. `제원설정`: 단지별 탭/항목 구성 화면 이동(관리자만)
9. `로그아웃`: 현재 세션 종료
10. `종료`: 홈 화면 임시 입력값 초기화 후 상단으로 이동

중요:
1. 표시되는 탭/입력항목은 단지별 제원 설정에 따라 달라집니다.
2. 선택되지 않은 탭/입력항목은 화면에서 자동 숨김됩니다.

## 5. 일일 운영 표준 절차
1. 로그인 후 `단지명` 입력
2. 날짜를 선택하고 `기간조회` 또는 `◀/▶`로 목표 날짜 이동
3. 각 탭에 점검값 입력
4. `저장` 클릭
5. 저장 후 `기간조회`로 재조회하여 값 반영 여부 확인
6. 필요 시 `PDF` 또는 `엑셀` 출력

## 6. 사용자 관리(관리자)
`사용자관리` 화면에서 다음 항목을 관리합니다.

입력 항목:
1. `아이디(login_id)`
2. `이름`
3. `역할`
4. `연락처`
5. `비밀번호`
6. `비고`
7. `관리자 권한`
8. `활성 사용자`

사용 절차:
1. 신규 등록 시 비밀번호(8자 이상) 입력 후 `저장`
2. 기존 사용자 수정 시 목록에서 `수정` 클릭 후 변경 저장
3. 삭제 시 목록에서 `삭제` 클릭

안전 규칙:
1. 현재 로그인한 자기 계정은 삭제할 수 없습니다.
2. 마지막 활성 관리자 계정은 삭제/비활성화할 수 없습니다.

## 7. 단지별 제원 설정(관리자)
`제원설정` 화면에서 단지별 화면 구조를 관리합니다.

지원 기능:
1. 단지명별 설정 저장/불러오기
2. 템플릿 선택 후 일부 탭/항목만 선택 적용
3. 탭 숨김, 항목 숨김
4. 항목명 변경
5. 항목 추가
6. 항목 속성 변경(타입, 범위 등)
7. 행 레이아웃 변경(몇 칸 몇 줄)

권장 절차:
1. `site_name` 입력
2. 템플릿 선택
3. 불러오기 방식 선택
4. `기존 설정 유지 + 병합(권장)` 또는 `기존 설정 덮어쓰기`
5. 탭/항목 체크 후 `선택 후 불러오기`
6. 필요 시 JSON 세부 수정
7. `양식미리보기`로 확인
8. `저장`
9. 메인 화면으로 돌아가 실제 표시 상태 확인

동작 규칙:
1. 선택하지 않은 탭은 숨김 처리됩니다.
2. 탭에서 선택한 항목이 0개면 탭 자체가 숨김 처리됩니다.
3. 단지별 저장값은 다음 접속 시에도 유지됩니다.

## 8. 장애 대응
1. 로그인 풀림(401/권한 오류): 다시 로그인합니다.
2. 탭이 보이지 않음: 해당 단지의 제원설정에서 탭/항목 숨김 여부를 확인합니다.
3. 저장했는데 값이 안 보임: 단지명/날짜 확인 후 `기간조회`를 다시 실행합니다.
4. PDF/엑셀이 안 내려받아짐: 브라우저 팝업 차단, 네트워크, 로그인 상태를 확인합니다.

## 9. 운영 체크리스트
일일:
1. 단지명/날짜 확인 후 점검값 입력
2. 저장 직후 재조회 확인
3. 필요 보고서(PDF/엑셀) 생성

주간:
1. 사용자 활성 상태 점검
2. 불필요 계정 비활성화
3. 단지별 제원 설정 변경 내역 검토

월간:
1. 운영 데이터 백업 점검
2. 계정/권한 정기 검토
3. 필드 범위(warn_min/warn_max) 현실성 재검토

## 10. 관리자 인수인계 권장 항목
1. 관리자 계정 2개 이상 유지
2. 단지명 표기 규칙 통일
3. 제원설정 변경 전/후 스크린샷 또는 변경 로그 보관
4. 사용자 권한 요청/승인 절차 문서화
